---
# Simple example - sync a secret from OpenBao KV
apiVersion: kubebao.io/v1alpha1
kind: BaoSecret
metadata:
  name: my-app-secrets
  namespace: default
spec:
  # Path in OpenBao where the secret is stored
  secretPath: "secret/data/myapp/config"
  
  # Target Kubernetes secret
  target:
    name: my-app-secret
    type: Opaque
    labels:
      app: my-app
    annotations:
      description: "Synced from OpenBao"
  
  # Refresh every hour
  refreshInterval: "1h"
---
# Advanced example - sync specific key with template
apiVersion: kubebao.io/v1alpha1
kind: BaoSecret
metadata:
  name: database-credentials
  namespace: production
spec:
  secretPath: "database/creds/my-role"
  secretEngine: database
  
  # Custom OpenBao connection
  openbaoRef:
    address: "https://openbao.prod.example.com:8200"
    namespace: "prod"
    authMethod: kubernetes
    authMountPath: "kubernetes-prod"
  
  roleName: "database-reader"
  
  target:
    name: db-credentials
    namespace: production
    type: kubernetes.io/basic-auth
    creationPolicy: Owner
  
  # Transform the secret data
  template:
    stringData:
      username: "{{ .Data.username }}"
      password: "{{ .Data.password }}"
      connection_string: "postgresql://{{ .Data.username }}:{{ .Data.password }}@db.example.com:5432/mydb"
  
  # Refresh more frequently for dynamic secrets
  refreshInterval: "5m"
---
# TLS certificate example
apiVersion: kubebao.io/v1alpha1
kind: BaoSecret
metadata:
  name: tls-certificate
  namespace: ingress
spec:
  secretPath: "pki/issue/my-role"
  secretEngine: pki
  
  # Arguments for PKI issue
  secretArgs:
    common_name: "myapp.example.com"
    ttl: "720h"
    alt_names: "www.myapp.example.com"
  
  target:
    name: myapp-tls
    type: kubernetes.io/tls
  
  template:
    data:
      tls.crt: "{{ .Data.certificate }}"
      tls.key: "{{ .Data.private_key }}"
      ca.crt: "{{ .Data.issuing_ca }}"
  
  refreshInterval: "24h"
