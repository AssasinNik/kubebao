---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.15.0
  name: baosecrets.kubebao.io
spec:
  group: kubebao.io
  names:
    kind: BaoSecret
    listKind: BaoSecretList
    plural: baosecrets
    singular: baosecret
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.secretPath
      name: Secret Path
      type: string
    - jsonPath: .spec.target.name
      name: Target
      type: string
    - jsonPath: .status.lastSyncTime
      name: Last Sync
      type: date
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: BaoSecret is the Schema for the baosecrets API
        properties:
          apiVersion:
            description: APIVersion defines the versioned schema of this representation
              of an object.
            type: string
          kind:
            description: Kind is a string value representing the REST resource this
              object represents.
            type: string
          metadata:
            type: object
          spec:
            description: BaoSecretSpec defines the desired state of BaoSecret
            properties:
              openbaoRef:
                description: OpenBaoRef references the OpenBao connection to use
                properties:
                  address:
                    description: Address is the address of the OpenBao server
                    type: string
                  authMethod:
                    default: kubernetes
                    description: AuthMethod is the authentication method to use
                    type: string
                  authMountPath:
                    description: AuthMountPath is the mount path for the auth method
                    type: string
                  namespace:
                    description: Namespace is the OpenBao namespace
                    type: string
                  serviceAccountRef:
                    description: ServiceAccountRef references a ServiceAccount to
                      use for authentication
                    properties:
                      name:
                        description: Name is the name of the ServiceAccount
                        type: string
                      namespace:
                        description: Namespace is the namespace of the ServiceAccount
                        type: string
                    required:
                    - name
                    type: object
                type: object
              refreshInterval:
                default: 1h
                description: RefreshInterval is the interval at which to refresh the
                  secret
                type: string
              roleName:
                description: RoleName is the role to use for authentication (if different
                  from default)
                type: string
              secretArgs:
                additionalProperties:
                  type: string
                description: SecretArgs are additional arguments for dynamic secrets
                  (database, pki)
                type: object
              secretEngine:
                default: kv
                description: SecretEngine is the type of secret engine (kv, database,
                  pki, etc.)
                type: string
              secretKey:
                description: SecretKey is the specific key to extract from the secret
                  (optional)
                type: string
              secretPath:
                description: SecretPath is the path in OpenBao where the secret is
                  stored
                type: string
              suspendSync:
                description: SuspendSync suspends the synchronization of the secret
                type: boolean
              target:
                description: Target defines where to sync the secret
                properties:
                  annotations:
                    additionalProperties:
                      type: string
                    description: Annotations to add to the target Secret
                    type: object
                  creationPolicy:
                    default: Owner
                    description: CreationPolicy defines what to do when the target
                      doesn't exist
                    enum:
                    - Owner
                    - Orphan
                    - Merge
                    type: string
                  labels:
                    additionalProperties:
                      type: string
                    description: Labels to add to the target Secret
                    type: object
                  name:
                    description: Name is the name of the target Kubernetes Secret
                    type: string
                  namespace:
                    description: Namespace is the namespace of the target Secret
                    type: string
                  type:
                    default: Opaque
                    description: Type is the type of the Kubernetes Secret
                    type: string
                required:
                - name
                type: object
              template:
                description: Template allows transforming the secret data before syncing
                properties:
                  data:
                    additionalProperties:
                      type: string
                    description: Data is a map of template strings
                    type: object
                  stringData:
                    additionalProperties:
                      type: string
                    description: StringData is a map of template strings for string
                      data
                    type: object
                type: object
            required:
            - secretPath
            - target
            type: object
          status:
            description: BaoSecretStatus defines the observed state of BaoSecret
            properties:
              conditions:
                description: Conditions represent the latest available observations
                  of the BaoSecret's state
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: lastTransitionTime is the last time the condition
                        transitioned from one status to another.
                      format: date-time
                      type: string
                    message:
                      description: message is a human readable message indicating
                        details about the transition.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: observedGeneration represents the .metadata.generation
                        that the condition was set based upon.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: reason contains a programmatic identifier indicating
                        the reason for the condition's last transition.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
              lastSyncTime:
                description: LastSyncTime is the last time the secret was synced
                format: date-time
                type: string
              observedGeneration:
                description: ObservedGeneration is the last observed generation
                format: int64
                type: integer
              secretVersion:
                description: SecretVersion is the version of the secret in OpenBao
                type: string
              syncedSecretName:
                description: SyncedSecretName is the name of the synced Kubernetes
                  Secret
                type: string
              syncedSecretNamespace:
                description: SyncedSecretNamespace is the namespace of the synced
                  Kubernetes Secret
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
